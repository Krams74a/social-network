{"version":3,"sources":["hoc/withAuthRedirect.js","Components/MessagesPage/MessagesPage.module.css","Components/MessagesPage/Chat/Chat.module.css","Components/MessagesPage/Chat/AddMessage/AddMessageForm.module.css","Components/MessagesPage/Chat/Messages/Messages.module.css","Components/MessagesPage/Chat/Message/Message.module.css","Components/MessagesPage/DialogsList/DialogsList.module.css","Components/MessagesPage/DialogsList/DialogItem/DialogItem.module.css","Components/MessagesPage/Chat/AddMessage/AddMessageForm.jsx","Components/MessagesPage/Chat/AddMessage/AddMessageContainer.jsx","Components/MessagesPage/Chat/Message/Message.jsx","Components/MessagesPage/Chat/Messages/Messages.jsx","Components/MessagesPage/Chat/Chat.jsx","Components/MessagesPage/DialogsList/DialogItem/DialogItem.jsx","Components/MessagesPage/DialogsList/DialogsList.jsx","Components/MessagesPage/MessagesPage.jsx"],"names":["withAuthRedirect","Component","this","props","isAuth","to","React","module","exports","AddMessageReduxForm","reduxForm","form","className","s","addMessage","onSubmit","handleSubmit","textareaContainer","Field","placeholder","component","name","buttonContainer","connect","state","value","messages","newMessageText","currentDialogId","sendMessage","formData","dispatch","reset","Message","messageContainer","isViewed","userImageContainer","photo","src","alt","userPhoto","messageContent","userName","href","senderName","messageText","onClick","deleteMessage","id","Messages","messagesContainer","map","message","body","viewed","Chat","prevProps","prevState","snapshot","getMessages","chat","compose","withRouter","DialogItem","activeClassName","dialogItemActive","dialogItem","setCurrentDialogId","userImg","DialogsList","dialogsList","dialogs","dialog","photos","small","MessagesPage","getDialogs","path","render","auth"],"mappings":"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","file":"static/js/4.10924d07.chunk.js","sourcesContent":["import React from \"react\";\r\nimport {Redirect} from \"react-router-dom\";\r\n\r\nexport const withAuthRedirect = (Component) => {\r\n\r\n    class RedirectComponent extends React.Component {\r\n        render() {\r\n            if (!this.props.isAuth) return <Redirect to='/login'/>\r\n\r\n            return <Component {...this.props} />\r\n        }\r\n    }\r\n\r\n    return RedirectComponent\r\n}\r\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"messages\":\"MessagesPage_messages__d6u2H\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"chat\":\"Chat_chat__1Zukb\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"addMessage\":\"AddMessageForm_addMessage__2eiNl\",\"textareaContainer\":\"AddMessageForm_textareaContainer__3Ar2O\",\"buttonContainer\":\"AddMessageForm_buttonContainer__3gCzg\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"messagesContainer\":\"Messages_messagesContainer__219ZV\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"messageContainer\":\"Message_messageContainer__14acA\",\"isViewed\":\"Message_isViewed__1ThOF\",\"messageContent\":\"Message_messageContent__tLl5g\",\"userName\":\"Message_userName__T2v-u\",\"messageText\":\"Message_messageText__1SnN8\",\"userImageContainer\":\"Message_userImageContainer__3bKfL\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"dialogsList\":\"DialogsList_dialogsList__WS0CS\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"dialogItem\":\"DialogItem_dialogItem__iom6v\",\"dialogItemActive\":\"DialogItem_dialogItemActive__3uR7p\",\"userImg\":\"DialogItem_userImg__35uhN\",\"userName\":\"DialogItem_userName__1ozeE\"};","import s from \"./AddMessageForm.module.css\";\nimport React from \"react\";\nimport {Field, reduxForm} from \"redux-form\";\n\nconst AddMessageForm = (props) => {\n    return (\n        <form className={s.addMessage} onSubmit={props.handleSubmit}>\n            <div className={s.textareaContainer}>\n                <Field placeholder=\"Напишите сообщение...\" component={'textarea'} name={'newMessageText'}/>\n            </div>\n            <div className={s.buttonContainer}>\n                <button className=\"fa fa-paper-plane\"> Отправить</button>\n            </div>\n        </form>\n    );\n}\n\nconst AddMessageReduxForm = reduxForm({form: \"addMessage\"})(AddMessageForm)\n\nexport default AddMessageReduxForm;\n","import {\n    addMessage, sendMessage,\n} from \"../../../../redux/messagesReducer\";\nimport {connect} from \"react-redux\";\nimport React from \"react\";\nimport AddMessageReduxForm from \"./AddMessageForm\";\nimport {reset} from \"redux-form\";\n\nconst AddMessageContainer = (props) => {\n    const onSubmit = (formData, dispatch) => {\n        props.sendMessage(props.currentDialogId, formData.newMessageText)\n        dispatch(reset(\"addMessage\"))\n    }\n\n    return (\n        <div>\n            <AddMessageReduxForm onSubmit={onSubmit}/>\n        </div>\n    )\n}\n\nlet mapStateToProps = (state) => {\n    return {\n        value: state.messages.newMessageText,\n        currentDialogId: state.messages.currentDialogId\n    }\n}\n\nexport default connect(mapStateToProps, {addMessage, sendMessage})(AddMessageContainer);\n","import s from './Message.module.css';\nimport userPhoto from \"../../../../assets/images/user.jpg\";\n\nconst Message = (props) => {\n    const onDeleteButtonClick = () => {\n        props.deleteMessage(props.id)\n    }\n\n    return (\n        <div className={`${s.messageContainer} ${props.isViewed ? s.isViewed : null}`}>\n            <div className={s.userImageContainer}>\n                {props.photo ? <img src={props.photo} alt=\"Not load\"/> : <img src={userPhoto} alt=\"Not load\"/>}\n            </div>\n            <div className={s.messageContent}>\n                <div className={s.userName}>\n                    <a href=\"#s\">{props.senderName}</a>\n                </div>\n                <div className={s.messageText}>\n                    <p>{props.messageText}</p>\n                </div>\n            </div>\n            <div>\n                <button onClick={onDeleteButtonClick}>Delete</button>\n            </div>\n        </div>\n    );\n}\n\nexport default Message;\n","import s from \"./Messages.module.css\";\nimport Message from \"../Message/Message\";\n\nconst Messages = (props) => {\n    return (\n        <div className={s.messagesContainer}>\n            { props.messages.map(message => <Message deleteMessage={props.deleteMessage}\n                                                     senderName={message.senderName}\n                                                     key={message.id}\n                                                     messageText={message.body}\n                                                     id={message.id}\n                                                     isViewed={message.viewed}/> )}\n        </div>\n    );\n}\n\nexport default Messages;\n","import s from './Chat.module.css';\nimport React from \"react\";\nimport AddMessageContainer from \"./AddMessage/AddMessageContainer\";\nimport Messages from \"./Messages/Messages\";\nimport {compose} from \"redux\";\nimport {withRouter} from \"react-router-dom\";\n\nclass Chat extends React.Component {\n    componentDidUpdate(prevProps, prevState, snapshot) {\n        if (this.props.currentDialogId !== prevProps.currentDialogId) {\n            this.props.getMessages(this.props.currentDialogId)\n        }\n    }\n\n    render() {\n        return (\n            <div className={s.chat}>\n                <Messages messages={this.props.messages} deleteMessage={this.props.deleteMessage}/>\n                <div className={s.textareaContainer}>\n                    <AddMessageContainer/>\n                </div>\n            </div>\n        );\n    }\n}\n\nexport default compose(\n    withRouter\n)(Chat);\n","import s from './DialogItem.module.css';\nimport {NavLink} from \"react-router-dom\";\nimport userPhoto from \"../../../../assets/images/user.jpg\"\n\nconst DialogItem = (props) => {\n\n    const onDialogClick = () => {\n        props.setCurrentDialogId(props.id)\n    }\n\n    return (\n        <NavLink to={\"/messages/\"+props.id} activeClassName={s.dialogItemActive} className={s.dialogItem} onClick={onDialogClick}>\n            <div className={s.userImg}>\n                {props.photo ? <img src={props.photo} alt=\"User\"/> : <img src={userPhoto} alt={\"User\"}/>}\n            </div>\n            <div className={s.userName}>\n                <p>{props.userName}</p>\n            </div>\n        </NavLink>\n    );\n}\n\nexport default DialogItem;\n","import s from './DialogsList.module.css';\nimport DialogItem from \"./DialogItem/DialogItem\";\n\nconst DialogsList = (props) => {\n    return (\n        <div className={s.dialogsList}>\n            { props.dialogs.map(dialog => <DialogItem setCurrentDialogId={props.setCurrentDialogId} id={dialog.id} key={dialog.id} userName={dialog.userName} photo={dialog.photos.small}/>) }\n        </div>\n    );\n}\n\nexport default DialogsList;\n","import s from './MessagesPage.module.css';\nimport Chat from \"./Chat/Chat\";\nimport {connect} from \"react-redux\";\nimport {withAuthRedirect} from \"../../hoc/withAuthRedirect\";\nimport {compose} from \"redux\";\nimport {deleteMessage, getDialogs, getMessages, setCurrentDialogId} from \"../../redux/messagesReducer\";\nimport DialogsList from \"./DialogsList/DialogsList\";\nimport React, {Component} from \"react\";\nimport {Route} from \"react-router-dom\";\n\nclass MessagesPage extends Component {\n    componentDidMount() {\n        this.props.getDialogs()\n    }\n\n    render() {\n        return (\n            <div className={s.messages}>\n                <DialogsList dialogs={this.props.dialogs} getMessages={this.props.getMessages}\n                             setCurrentDialogId={this.props.setCurrentDialogId}/>\n                <Route path='/messages/:userId?' render={ () => <Chat messages={this.props.messages}\n                                                                      currentDialogId={this.props.currentDialogId}\n                                                                      getMessages={this.props.getMessages}\n                                                                      deleteMessage={this.props.deleteMessage}/>}/>\n            </div>\n        );\n    }\n}\n\nconst mapStateToProps = (state) => {\n    return {\n        isAuth: state.auth.isAuth,\n        dialogs: state.messages.dialogs,\n        messages: state.messages.messages,\n        currentDialogId: state.messages.currentDialogId\n    }\n}\n\nexport default compose(\n    connect(mapStateToProps, {getDialogs, getMessages, setCurrentDialogId, deleteMessage}),\n    withAuthRedirect\n)(MessagesPage)\n"],"sourceRoot":""}